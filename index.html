<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- bootstrap css-->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
   <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  </head>
  <body>

    <h1>TO-DO LIST</h1>
  
    <form action="" onsubmit="handleSubmit(event)">
      
<div class="input-group mt-5 " >
  <input type="text" class="form-control" placeholder="Todos" aria-label="Todos aria-describedby="button-addon2" id="todo" >
  <button class="btn btn-outline-primary ms-3" type="submit" id="button-addon2">SUBMIT</button>
</div>
    </form>
    <!-- <button onclick="handleClearAll(event)" class="btn btn-danger">CLEAR ALL</button> -->
    <ul id="ul"></ul>

    
    <script>
      const todo = document.getElementById("todo");
      const ul = document.getElementById("ul");

      function getTodos() {
        const todos = localStorage.getItem("todo") || "[]";
        const oldTodos = JSON.parse(todos);
        return oldTodos;
      }

      function handleSubmit(e) {
        e.preventDefault();
        if (todo.value.trim()) {
          const oldTodos = getTodos();
          localStorage.setItem(
            "todo",
            JSON.stringify([...oldTodos, todo.value])
          );
        }
        showTodos()
        todo.value=""
      }

      function showTodos() {
        const todos = getTodos();
        ul.innerHTML = "";
        todos.forEach((todo , index) => {
          const li = document.createElement("li");
          li.innerHTML = ` <button onclick="handleDelete(${index})" class="input-btn btn btn-primary"> <i class="bi bi-trash"></i> </button> ${todo} ` 
          ul.appendChild(li)
        });
      }
      showTodos()

      function handleClearAll(){
        const todos = getTodos()
        localStorage.clear()
        showTodos()
      }

      function handleDelete(index){
       const todos = getTodos()
       const oldTodos = todos.filter((ele , i) => i != index)
       localStorage.setItem("todo" , JSON.stringify([...oldTodos]))
       showTodos()
      }
    </script>
  </body>
</html>
